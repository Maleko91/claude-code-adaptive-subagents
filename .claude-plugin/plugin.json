{
  "name": "adaptive-subagents",
  "version": "2.0.0",
  "description": "Optimize token cost by routing subtasks to the cheapest model tier that satisfies quality. Delegates search/format to Haiku, implementation to Sonnet, and architecture/security to Opus.",
  "author": {
    "name": "iamyegor"
  },
  "license": "MIT",
  "keywords": [
    "claude-code",
    "subagent",
    "routing",
    "token-optimization",
    "cost-saving"
  ],
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are about to call the Task tool. Before proceeding:\n1. Have you picked the cheapest model tier that satisfies quality? (Haiku for search/format/lookup, Sonnet for implementation/tests, Opus only for planning/architecture/security/ambiguous scope)\n2. Output '**Routing to {Model}:** {brief reason}' on its own line so the user sees the delegation."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A subagent Task just completed. Append ONE row to routing-log.md using Edit (never delegate this). If the file does not exist, create it with this exact header first:\n\n| Model | Category | Saved | Task |\n|-------|----------|-------|------|\n\nThen append:\n| {model} | {category} | {multiplier: 30x/6x/—} | {brief description} |\n\nDo NOT add a Timestamp column. Do NOT write verbose text in the Saved column — just the multiplier."
          }
        ]
      }
    ]
  }
}
