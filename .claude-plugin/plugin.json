{
  "name": "adaptive-subagents",
  "version": "2.1.0",
  "description": "Optimize token cost by routing subtasks to the cheapest model tier that satisfies quality. Delegates search/format to Haiku, implementation to Sonnet, and architecture/security to Opus.",
  "author": {
    "name": "maleko91"
  },
  "license": "MIT",
  "keywords": [
    "claude-code",
    "subagent",
    "routing",
    "token-optimization",
    "cost-saving"
  ],
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are about to call the Task tool. Before proceeding:\n1. Pick the cheapest model tier that satisfies quality: Haiku for search/format/lookup, Sonnet for implementation/tests, Opus only for planning/architecture/security/ambiguous scope.\n2. If a BMAD or other workflow skill is orchestrating, respect its task decomposition — do NOT restructure the work. Apply model-tier routing to each subtask it defines. The workflow decides WHAT to do; this routing decides WHICH MODEL does it.\n3. Output '**Routing to {Model}:** {brief reason}' on its own line so the user sees the delegation."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A subagent Task just completed. Log it to routing-log.md yourself (do not delegate this step).\n\nStep 1: If routing-log.md does not exist yet, use the Write tool to create it with this content:\n| Model | Category | Saved | Task |\n|-------|----------|-------|------|\n\nStep 2: Use the Edit tool to append one row to routing-log.md:\n| {model} | {category} | {30x or 6x or —} | {brief description} |\n\nUse Haiku=30x, Sonnet=6x, Opus=—. No extra columns."
          }
        ]
      }
    ]
  }
}
